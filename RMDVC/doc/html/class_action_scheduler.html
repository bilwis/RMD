<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Rogue M.D.: ActionScheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rogue M.D.
   &#160;<span id="projectnumber">prealpha</span>
   </div>
   <div id="projectbrief">A roguelike (eventually...) with a strong focus on a detailed injury system.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_action_scheduler.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_action_scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ActionScheduler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_action_8hpp_source.html">Action.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ActionScheduler:</div>
<div class="dyncontent">
<div class="center"><img src="class_action_scheduler__coll__graph.png" border="0" usemap="#_action_scheduler_coll__map" alt="Collaboration graph"/></div>
<map name="_action_scheduler_coll__map" id="_action_scheduler_coll__map">
<area shape="rect" id="node2" href="struct_action_queue_entry.html" title="ActionQueueEntry" alt="" coords="194,452,322,479"/><area shape="rect" id="node3" href="class_action.html" title="Action" alt="" coords="229,363,287,389"/><area shape="rect" id="node4" href="class_object.html" title="The base class for all objects in the game. " alt="" coords="269,95,329,121"/><area shape="rect" id="node7" href="class_render_object.html" title="A class representing an object that may be rendered on screen. " alt="" coords="183,184,285,211"/><area shape="rect" id="node6" href="class_actor.html" title="Actor" alt="" coords="131,273,185,300"/><area shape="rect" id="node8" href="class_ai.html" title="Ai" alt="" coords="5,184,44,211"/><area shape="rect" id="node9" href="class_destructible.html" title="Destructible" alt="" coords="69,184,159,211"/><area shape="rect" id="node10" href="class_body.html" title="The code representation of a body of an Actor. " alt="" coords="88,95,140,121"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4a51f77600c54597d753adcad3619795"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_action_scheduler.html#a4a51f77600c54597d753adcad3619795">scheduleAction</a> (<a class="el" href="class_action.html">Action</a> *action, bool playerAction=false)</td></tr>
<tr class="separator:a4a51f77600c54597d753adcad3619795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a67c5a6ce35e5f334d250c610c0e1ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_action.html">Action</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_action_scheduler.html#a0a67c5a6ce35e5f334d250c610c0e1ce">nextAction</a> ()</td></tr>
<tr class="separator:a0a67c5a6ce35e5f334d250c610c0e1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a173acdc4d148dcf527187f46d4c447b1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a173acdc4d148dcf527187f46d4c447b1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isPlayerActionScheduled</b> ()</td></tr>
<tr class="separator:a173acdc4d148dcf527187f46d4c447b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:afbb0f64e3b1338fb14fd92a25574231a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_action_scheduler.html#afbb0f64e3b1338fb14fd92a25574231a">calculateTimeToExec</a> (int actor_speed, int action_cost)</td></tr>
<tr class="separator:afbb0f64e3b1338fb14fd92a25574231a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad314c2dc12058ba27474ff68df0f98bf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad314c2dc12058ba27474ff68df0f98bf"></a>
std::list&lt; <a class="el" href="struct_action_queue_entry.html">ActionQueueEntry</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><b>queue</b></td></tr>
<tr class="separator:ad314c2dc12058ba27474ff68df0f98bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8e45656eab7d8af89b9658301c167d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e8e45656eab7d8af89b9658301c167d"></a>
<a class="el" href="struct_action_queue_entry.html">ActionQueueEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>nextPlayerAction</b> = nullptr</td></tr>
<tr class="separator:a2e8e45656eab7d8af89b9658301c167d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is responsible for the correct execution order of actions that are scheduled for the Actors in the game. It holds a double-linked list of <a class="el" href="struct_action_queue_entry.html">ActionQueueEntry</a>, which acts as the FIFO queue of Actions. The "time to execution" (TtE) is calculated as follows is an arbitrary number used to sort the action queue. The action with the lowest TtE is executed next, and its TtE substracted from all other TtEs in the queue. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="afbb0f64e3b1338fb14fd92a25574231a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double ActionScheduler::calculateTimeToExec </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>actor_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>action_cost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function calculates the time to execution as follows: (<a class="el" href="class_action.html">Action</a> cost) / (<a class="el" href="class_actor.html">Actor</a> speed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">actor_speed</td><td>The speed of the actor (must be &gt; 0). </td></tr>
    <tr><td class="paramname">action_cost</td><td>The cost of the action. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The time to execution. </dd></dl>

</div>
</div>
<a class="anchor" id="a0a67c5a6ce35e5f334d250c610c0e1ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_action.html">Action</a> * ActionScheduler::nextAction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function returns the next action in queue. The action is deleted from the queue. <em>Important: The action instance must be destroyed by the caller after use, because it cannot be handled by the Scheduler or the <a class="el" href="class_action.html">Action</a> itself!</em></p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the next action in queue or nullptr, if the queue is empty. </dd></dl>

</div>
</div>
<a class="anchor" id="a4a51f77600c54597d753adcad3619795"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ActionScheduler::scheduleAction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_action.html">Action</a> *&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>playerAction</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function enters an action into the Schedulers queue. The time to execution is calculated from the action itself. The action will be inserted at the position in the queue corresponding to its time to execution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action</td><td>A pointer to the action to be scheduled. </td></tr>
    <tr><td class="paramname">playerAction</td><td>Wheter the action was scheduled by the <a class="el" href="class_player_ai.html">PlayerAi</a>, and will cause a block after it was executed, waiting for the next input by the player. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_action_8hpp_source.html">Action.hpp</a></li>
<li>src/Action.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_action_scheduler.html">ActionScheduler</a></li>
    <li class="footer">Generated on Wed Aug 27 2014 00:29:53 for Rogue M.D. by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
